name: Update Git Submodule

on:
    schedule:
        - cron: "0 0 * * 0"
    workflow_dispatch:

jobs:
    update_submodule:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout repository
              uses: actions/checkout@v4

            - name: Update submodule
              run: git submodule update --remote --merge

            - name: Commit if anything changes
              run: |
                    git config --local user.email "actions@github.com"
                    git config --local user.name "GitHub Actions"
                    git commit -am "Update Aplos"
                    git push
